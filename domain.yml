version: '2.0'
config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 0
  carry_over_slots_to_new_session: true
intents:
- start:
    use_entities: true
- greet:
    use_entities: true
- affirm:
    use_entities: true
- deny:
    use_entities: true
- how_it_works:
    use_entities: true
- dont_bother_me:
    use_entities: true
- bot_challenge:
    use_entities: true
- want_chitchat:
    use_entities: true
- EXTERNAL_ask_to_join:
    use_entities: true
- EXTERNAL_ask_to_confirm:
    use_entities: true
- EXTERNAL_join_room:
    use_entities: true
- EXTERNAL_find_partner:
    use_entities: true
- EXTERNAL_expire_partner_confirmation:
    use_entities: true
entities:
- partner_id
- partner_photo_file_id
- room_url
slots:
  swiper_state:
    type: categorical
    values:
    - new
    - wants_chitchat
    - ok_to_chitchat
    - waiting_partner_confirm
    - asked_to_join
    - asked_to_confirm
    - roomed
    - rejected_join
    - rejected_confirm
    - do_not_disturb
    auto_fill: false
    influence_conversation: true
  swiper_action_result:
    type: categorical
    values:
    - partner_has_been_asked
    - partner_was_not_found
    - partner_not_waiting_anymore
    - room_url_ready
    - success
    - error
    auto_fill: false
    influence_conversation: true
  swiper_error:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  swiper_error_trace:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  swiper_native:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  deeplink_data:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  telegram_from:
    type: rasa.shared.core.slots.AnySlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  partner_search_start_ts:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: false
    influence_conversation: false
  partner_id:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
  partner_photo_file_id:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: true
  room_url:
    type: rasa.shared.core.slots.TextSlot
    initial_value: null
    auto_fill: true
    influence_conversation: false
responses:
  utter_greet_offer_chitchat:
  - custom:
      parse_mode: html
      text: "Hi, my name is Swipy\U0001F643\n \nI can connect you with a stranger in a video chat so you could practice your English speaking skills \U0001F1EC\U0001F1E7\n \n<b>Would you like to give it a try?</b>"
  utter_ok_arranging_chitchat:
  - text: |-
      Great! Let me find someone for you to chitchat with.
       
      I will get back to you within two minutes... ‚è≥
  utter_how_it_works:
  - text: |-
      I can arrange video chitchat with another human for you üé• üó£ ‚òéÔ∏è
       
      Here is how it works:
       
      - I find someone who also wants to chitchat.
      - I confirm with you and them that you are both ready.
      - I send both of you a video chat link.
  utter_partner_search_timed_out_try_again:
  - custom:
      parse_mode: html
      text: "Unfortunately, I couldn't find anyone in two minutes \U0001F61E\n \n<b>Do you want me to try again?</b>"
  utter_someone_wants_to_chat_photo:
  - custom:
      caption: "Hey! This person wants to chitchat \U0001F5E3\n \n<b>Are you ready for a video call?</b> \U0001F3A5 ‚òéÔ∏è"
      parse_mode: html
      photo: '{partner_photo_file_id}'
  utter_someone_wants_to_chat:
  - custom:
      parse_mode: html
      text: "Hey! There is someone who wants to chitchat \U0001F5E3\n \n<b>Are you ready for a video call?</b> \U0001F3A5 ‚òéÔ∏è"
  utter_checking_if_partner_ready_too:
  - custom:
      parse_mode: html
      text: "Just a moment, I'm checking if that person is ready too...\n \nPlease don't go anywhere - <b>this may take up to a minute</b> ‚è≥"
  utter_found_someone_check_ready_photo:
  - custom:
      caption: "Hooray! I have found someone who is willing to chitchat!\n \n<b>Are you ready for a video call?</b> \U0001F3A5 ‚òéÔ∏è"
      parse_mode: html
      photo: '{partner_photo_file_id}'
  utter_found_someone_check_ready:
  - custom:
      parse_mode: html
      text: "Hooray! I have found someone who is willing to chitchat!\n \n<b>Are you ready for a video call?</b> \U0001F3A5 ‚òéÔ∏è"
  utter_partner_already_gone:
  - text: |-
      That person seems to have become unavailable üòµ
       
      Fear not!
       
      I am already looking for someone else to connect you with and will get back to you within two minutes... ‚è≥
  utter_room_url:
  - custom:
      parse_mode: html
      text: "Awesome!\n \n<b>Please follow this link to join the video call:</b>\n \n{room_url}"
  utter_partner_ready_room_url:
  - custom:
      parse_mode: html
      text: "Done!\n \n<b>Please follow this link to join the video call:</b>\n \n{room_url}"
  utter_declined:
  - text: |-
      Ok, declined ‚ùå
       
      May I ask you if there is any specific time or times of day (maybe days of week) when you are more likely to join someone for chitchat over a video call?
  utter_hope_to_see_you_later:
  - text: |-
      Ok, I will not bother you üõë
       
      Should you change your mind and decide that you want to chitchat with someone, just let me know - I will set up a video call üòâ
  utter_iamabot:
  - text: I'm an AI-powered chatbot ü§ñ
  utter_error:
  - text: Ouch! Something went wrong ü§ñ
actions:
- action_session_start
- action_offer_chitchat
- action_find_partner
- action_ask_to_join
- action_accept_invitation
- action_join_room
- action_do_not_disturb
- action_reject_invitation
- action_expire_partner_confirmation
forms: {}
e2e_actions: []
